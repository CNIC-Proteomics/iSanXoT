---

###################
# COMMAND TEMPLATE 
# Description: 
- name: NORCOMBINE
  description: Combine experiments
  force: 0
  rules:

  # Rule: create a file with the list of experiments/tags ---
  - name: create_exp_tags
    infiles:
      -ii: __NAMDIR__/__WF_INPUT__/**/__WF_LEVEL__2__WF_NORM_____WF_LOWERNORM__.tsv
    outfiles:
      -o: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___tags.tsv
    parameters:
    more_params: ''
    cline: '"__ISANXOT_PYTHON_EXEC__" "__ISANXOT_SRC_HOME__/src/adaptors/createCardenioTags.py" '

  # Rule: cardenio ---
  - name: cardenio
    infiles:
      -t: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___tags.tsv
    outfiles:
      -d: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Data.tsv
      -r: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Rels.tsv
      -L: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Log.txt
    parameters:
      anal:
        -a: __WF_LEVEL__2comb__WF_NORM__
      outdir:
        -p: __NAMDIR__/__WF_OUTPUT__
    more_params: ''
    cline: '"__ISANXOT_PYTHON_EXEC__" "__ISANXOT_SRC_HOME__/src/SanXoT/cardenio.py" '

    # Rule: sanxot integration: obtaining integrated X and V values ---
  - name: comb_sanxot1
    infiles:
      -d: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Data.tsv
      -r: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Rels.tsv
    outfiles:
      -z: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___outStats1.tsv
      -L: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___variance.txt
      -G: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___outGraph1.png
    parameters:
      anal:
        -a: __WF_LEVEL__2comb__WF_NORM__
      maxiterations:
        -m: 600
      var(x):
        -v: ''
      tag:
        --tags: ''
    more_params: ''
    cline: '"__ISANXOT_PYTHON_EXEC__" "__ISANXOT_SRC_HOME__/src/SanXoT/sanxot.py" -g -b -s '
  - name: comb_sanxotsieve
    infiles:
      -d: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Data.tsv
      -r: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Rels.tsv
      -V: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___variance.txt
    outfiles:
      -n: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___tagged.tsv
      -L: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___infoFile.txt
    parameters:
      anal:
        -a: __WF_LEVEL__2comb__WF_NORM__
      fdr:
        -f: 0.01
      var(x):
        -v: ''
      tag:
        --tags: ''
    more_params: ''
    cline: '"__ISANXOT_PYTHON_EXEC__" "__ISANXOT_SRC_HOME__/src/SanXoT/sanxotsieve.py" '
  - name: comb_sanxot2
    infiles:
      -d: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___Data.tsv
      -r: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___tagged.tsv
      -V: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___variance.txt
    outfiles:
      -o: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__.tsv
      -z: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___outStats.tsv
      -u: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___lowerNormW.tsv
      -U: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___lowerNormV.tsv
      -G: __NAMDIR__/__WF_OUTPUT__/__WF_LEVEL__2comb__WF_NORM___outGraph.png
    parameters:
      anal:
        -a: __WF_LEVEL__2comb__WF_NORM__
      tag:
        --tags: '!out'
    more_params: ''
    cline: '"__ISANXOT_PYTHON_EXEC__" "__ISANXOT_SRC_HOME__/src/SanXoT/sanxot.py" -g -f '
###################
