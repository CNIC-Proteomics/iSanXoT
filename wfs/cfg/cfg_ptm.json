{
  "indata": "",
  "indir": "",
  "infilenames": [],
  "dbfile": "",
  "catfile": "",
  "outdir": "",
  "tmpdir": "",
  "rstdir": "",
  "logdir": "",
  "workflow": {
    "verbose": true,
    "rules": [{
      "name": "ratios",
      "description": "Calculation of ratios (Xs, Vs,...)",
      "executor": "indir_to_expdir",
      "enabled": true,
      "inputs":  [],
      "outputs": ["ID-q.tsv"],
      "methods": [{
        "script": "preSanXoT/ratios.py",
        "inputs":  { "--indir": "--WF__INDIR--" },
        "params":  "--datfile \"--WF__INDATA--\"  --outdir \"--WF__WKS__TMPDIR--\" -v"
      }]
    },{
        "name": "aljamia",
        "description": "Extract information from ID-q file",
        "executor": "expdir_to_namedir",
        "enabled": true,
        "inputs":  ["ID-q.tsv"],
        "outputs": ["u_scans.ptm.tsv", "u_scans.noptm.tsv", "s2p_rels.ptm.tsv", "s2p_rels.noptm.tsv", "p2q_rels.ptm.tsv", "p2q_rels.noptm.tsv"],
        "methods": [{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "outputs": { "-o": "u_scans.ptm.tsv" },
          "params":  "-i [Raw_FirstScan]-[Charge] -j [Xs_--TAG--_vs_--CONTROLTAG--] -k [Vs_--TAG--_vs_--CONTROLTAG--] -l PTM -f \"[Modified]==True\" -R1"
        },{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "outputs": { "-o": "u_scans.noptm.tsv" },
          "params":  "-i [Raw_FirstScan]-[Charge] -j [Xs_--TAG--_vs_--CONTROLTAG--] -k [Vs_--TAG--_vs_--CONTROLTAG--] -l No_PTM -f \"[Modified]==False\" -R1"
        },{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "outputs": { "-o": "s2p_rels.ptm.tsv" },
          "params":  "-i [Sequence] -j [Raw_FirstScan]-[Charge] -k PTM -f \"[Modified]==True\" -R1"
        },{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "outputs": { "-o": "s2p_rels.noptm.tsv" },
          "params":  "-i [Sequence] -j [Raw_FirstScan]-[Charge] -k No_PTM -f \"[Modified]==False\" -R1"
        },{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "outputs": { "-o": "p2q_rels.ptm.tsv" },
          "params":  "-i [FASTAProteinDescription] -j [Sequence] -k PTM -f \"[Modified]==True\" -R1"
        },{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "outputs": { "-o": "p2q_rels.noptm.tsv" },
          "params":  "-i [FASTAProteinDescription] -j [Sequence] -k No_PTM -f \"[Modified]==False\" -R1"
        }]
    },{
      "name": "aljamia_cat",
      "description": "Concatenate files from aljamia",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["s2p_rels.ptm.tsv", "s2p_rels.noptm.tsv", "p2q_rels.ptm.tsv", "p2q_rels.noptm.tsv"],
      "outputs": ["s2p_rels.tsv", "p2q_rels.tsv"],
      "methods": [{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infiles": ["s2p_rels.ptm.tsv", "s2p_rels.noptm.tsv"] },
        "outputs": { "--outfile": "s2p_rels.tsv" }
      },{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infile": ["p2q_rels.ptm.tsv", "p2q_rels.noptm.tsv"] },
        "outputs": { "--outfile": "p2q_rels.tsv" }
      }]
    },{
      "name": "klibrate",
      "description": "SanXoT node: calibrate",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["u_scans.ptm.tsv", "u_scans.noptm.tsv", "s2p_rels.tsv"],
      "outputs": ["scans.ptm.tsv", "scans.noptm.tsv"],
      "methods": [{
        "script": "SanXoT/klibrate.py",
        "inputs":  { "-d": "u_scans.ptm.tsv" },
        "outputs": { "-r": "s2p_rels.tsv", "-o": "scans.ptm.tsv" },
        "params":  "-a s2p_ptm -g "
      },{
        "script": "SanXoT/klibrate.py",
        "inputs":  { "-d": "u_scans.noptm.tsv" },
        "outputs": { "-r": "s2p_rels.tsv", "-o": "scans.noptm.tsv" },
        "params":  "-a s2p_noptm -g "
      }]      
    },{
      "name": "scan2peptide_ptm",
      "description": "SanXoT node: scan to peptide",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["scans.noptm.tsv", "s2p_rels.tsv"],
      "outputs": ["peptides.noptm.tsv", "s2p_noptm_infoFile.txt"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "scans.noptm.tsv", "-r": "s2p_rels.tsv" },
        "params":  "-a s2p_noptm -g -b -s"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "scans.noptm.tsv", "-r": "s2p_rels.tsv" },
        "params":  "--PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "scans.noptm.tsv", "-r": "scans.noptm_tagged.tsv" },
        "outputs": { "-o": "peptides.noptm.tsv" },
        "params":  "-a s2p_noptm -g -f --PARAMS__VARIANCE--"
      }]  
    },{
      "name": "scan2peptide_ptm",
      "description": "SanXoT node: scan to peptide",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["scans.ptm.tsv", "s2p_rels.tsv", "s2p_noptm_infoFile.txt"],
      "outputs": ["peptides.ptm.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "scans.ptm.tsv", "-r": "s2p_rels.tsv" },
        "params":  "-a s2p_ptm -g -b -s"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "scans.ptm.tsv", "-r": "s2p_rels.tsv" },
        "params":  "--PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "scans.ptm.tsv", "-r": "scans.ptm_tagged.tsv" },
        "outputs": { "-o": "peptides.ptm.tsv" },
        "params":  "-a s2p_ptm -g -f --PARAMS__VARIANCE--"
      }]    
    },{
      "name": "concatenate",
      "description": "Concatenate files from scan2peptide",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["peptides.noptm.tsv", "peptides.ptm.tsv"],
      "outputs": ["peptides.tsv"],
      "methods": [{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infiles": ["peptides.noptm.tsv", "peptides.ptm.tsv"] },
        "outputs": { "--outfile": "peptides.tsv" }
      }]  
    },{
      "name": "peptide2protein",
      "description": "SanXoT node: peptide to protein",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["peptides.tsv", "p2q_rels.tsv"],
      "outputs": ["proteins.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  "-a p2q -g -b -s"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  "--PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "peptides_tagged.tsv" },
        "outputs": { "-o": "proteins.tsv" },
        "params":  "-a p2q -g -f --PARAMS__VARIANCE--"
      }]  
    },{
      "name": "protein2category",
      "description": "SanXoT node: protein to category",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["proteins.tsv"],
      "outputs": ["categories.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv" },
        "params":  "-a q2c -g -b -s -r \"--WF__INFILE__CAT--\""
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "proteins.tsv" },
        "params":  "-r \"--WF__INFILE__CAT--\" --PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv", "-r": "proteins_tagged.tsv" },
        "outputs": { "-o": "categories.tsv" },
        "params":  "-a q2c -g -f --PARAMS__VARIANCE--"
      }]
    },{
      "name": "everything2all",
      "description": "SanXoT node: peptide/protein/category to all",
      "executor": "on_namedir",
      "enabled": true,
      "inputs":  ["peptides.tsv", "proteins.tsv", "categories.tsv"],
      "outputs": ["p2a_outStats.tsv", "q2a_outStats.tsv", "c2a_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv" },
        "outputs": { "-z": "p2a_outStats.tsv" },
        "params":  "-a p2a -C -g "
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv" },
        "outputs": { "-z": "q2a_outStats.tsv" },
        "params":  "-a q2a -C -g -f "
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "categories.tsv" },
        "outputs": { "-z": "c2a_outStats.tsv" },
        "params":  "-a c2a -C -g -f -v 0"
      }]  
    },{
      "name": "collector",
      "description": "Merge the results of SanXoT nodes",
      "executor": "namedir_to_rstdir",
      "enabled": true,
      "inputs":  ["p2a_outStats.tsv", "q2a_outStats.tsv", "c2a_outStats.tsv"],
      "outputs": ["p2a_outStats.tsv", "q2a_outStats.tsv", "c2a_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "p2a_outStats.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex p2a_outStats.tsv"
      },{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "q2a_outStats.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex q2a_outStats.tsv"
      },{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "c2a_outStats.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex c2a_outStats.tsv"
      }]  
    }]
  }
}
