{
  "indata": "",
  "indir": "",
  "outdir": "",
  "catfile": "",
  "workflow": {
    "verbose": true,
    "rules": [{
      "name": "converter",
      "enabled": true,
      "threads": 2,
      "description": "Convert the result from MaxQuant (txt/evidences) to ID-q file: label-free",
      "indir": "--WF__INDIR--",
      "outdir": "--WF__WKSDIR--",
      "inputs":  ["modificationSpecificPeptides.txt"],
      "outputs": ["ID.tsv"],
      "methods": [{
        "script": "converter/convert2id.py",
        "inputs":  { "--infile": "modificationSpecificPeptides.txt" },
        "params":  { "--n_workers": "2" },
        "outputs": { "--outfile": "ID.tsv" }
      }]
    },{
      "name": "pre_sanxot",
      "enabled": true,
      "threads": 2,
      "description": "Calculation of ratios (Xs, Vs,...)",
      "indir": "--WF__WKSDIR--",
      "outdir": "--WF__WKSDIR--",
      "inputs":  ["ID.tsv"],
      "outputs": ["ID-q.tsv"],
      "methods": [{
        "script": "pRatio/pre_sanxot.py",
        "inputs":  { "--infile": "ID.tsv" },
        "params":  { "--datfile": "--WF__INDATA--" },
        "outputs": { "--outfile": "ID-q.tsv" }
      }]
    },{
      "name": "aljamia",
      "enabled": true,
      "threads": 3,
      "description": "Extract information from ID-q file",
      "indir": "--WF__WKSDIR--",
      "outdir": "--WF__WKS__TMPDIR--",
      "inputs":  ["ID-q.tsv"],
      "outputs": ["u_peptides.tsv", "p2q_rels_human.tsv", "p2q_rels_rest.tsv", "q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "params":  { "-i": "[SequenceMod]", "-j": "[Xs_--TAG--_vs_--CONTROLTAG--]", "-k": "[Vs_--TAG--_vs_--CONTROLTAG--]" },
        "outputs": { "-o": "u_peptides.tsv" }    
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "params":  { "-i": "[Protein]", "-j": "[SequenceMod]", "-l": "hsa", "-f": "[Species]~~Homo sapiens" },
        "outputs": { "-o": "p2q_rels_human.tsv" }
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "params":  { "-i": "[Protein]", "-j": "[SequenceMod]", "-l": "scere_ecoli", "-f": "[Species]!~Homo sapiens && [Species]!~#N/A" },
        "outputs": { "-o": "p2q_rels_rest.tsv" }
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "params":  { "-i": "1", "-j": "[Protein]", "-l": "hsa", "-f": "[Species]~~Homo sapiens" },
        "outputs": { "-o": "q2org_rels_human.tsv" }    
        },{
          "script": "SanXoT/aljamia.py",
          "inputs":  { "-x": "ID-q.tsv" },
          "params":  { "-i": "1", "-j": "[Protein]", "-l": "scere_ecoli", "-f": "[Species]!~Homo sapiens && [Species]!~#N/A" },
          "outputs": { "-o": "q2org_rels_rest.tsv" }  
      }]
    },{
      "name": "aljamia_cat",
      "enabled": true,
      "threads": 1,
      "description": "Concatenate files from aljamia",
      "indir": "--WF__WKS__TMPDIR--",
      "outdir": "--WF__WKS__TMPDIR--",
      "inputs":  ["p2q_rels_human.tsv", "p2q_rels_rest.tsv", "q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "outputs": ["p2q_rels.tsv", "q2org_rels.tsv"],
      "methods": [{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infiles": ["p2q_rels_human.tsv", "p2q_rels_rest.tsv"] },
        "outputs": { "--outfile": "p2q_rels.tsv" }
      },{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infile": ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"] },
        "outputs": { "--outfile": "q2org_rels.tsv" }
      }]
    },{
      "name": "peptide2protein",
      "enabled": true,
      "threads": 3,
      "description": "SanXoT node: peptide to protein",
      "indir": "--WF__WKS__TMPDIR--",
      "outdir": "--WF__WKS__TMPDIR--",
      "inputs":  ["u_peptides.tsv", "p2q_rels.tsv"],
      "outputs": ["peptides.tsv", "proteins.tsv"],
      "methods": [{
        "script": "SanXoT/klibrate.py",
        "inputs":  { "-d": "u_peptides.tsv" },
        "params":  { "-a": "p2q", "-g": "" },
        "outputs": { "-r": "p2q_rels.tsv", "-o": "peptides.tsv" }
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  { "-a": "p2q", "-g": "", "-b": "", "-s": "" }
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  { "-f": "0.01", "-V": "p2q_infoFile.txt" }
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv" },
        "params":  { "-a": "p2q", "-g": "", "-f": "", "-r": "peptides_tagged.tsv", "-V": "p2q_infoFile.txt", "--tags": "!out" },
        "outputs": { "-o": "proteins.tsv" }
      }]  
    },{
      "name": "protein2all",
      "enabled": true,
      "threads": 3,
      "description": "SanXoT node: protein to all",
      "indir": "--WF__WKS__TMPDIR--",
      "outdir": "--WF__WKS__TMPDIR--",
      "inputs":  ["proteins.tsv", "q2org_rels.tsv"],
      "outputs": ["q2a_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv", "-r": "q2org_rels.tsv" },
        "params":  { "-a": "q2a", "-g": "", "-s": "", "--tags": "hsa" },
        "outputs": { "-z": "q2a_outStats.tsv" }
      }]  
    },{
      "name": "compilator",
      "enabled": true,
      "threads": 1,
      "description": "Merge the results of SanXoT nodes",
      "indir": "--WF__WKS__TMPDIR--",
      "outdir": "--WF__WKS__RSTDIR--",
      "inputs":  ["q2a_outStats.tsv"],
      "outputs": ["q2a_lowerNormV.tsv"],
      "methods": [{
        "script": "compilator/compilator.py",
        "params":  { "--indir":   "--WF__EXPTO__DIR--", "--regex": "q2a_lowerNormV.tsv" },
        "outputs": { "--outfile": "q2a_lowerNormV.tsv" }
      }]  
    },{
      "name": "sanxot",
      "enabled": true,
      "threads": 3,
      "description": "Execute SanXoT methods within 'flexible' directory",
      "indir": "--WF__WKS__RSTDIR--",
      "outdir": "--WF__WKS__RSTDIR--",
      "inputs":  ["q2a_lowerNormV.tsv"],
      "outputs": ["protein_expto.tsv", "q2q_rels.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "q2a_lowerNormV.tsv" },
        "params":  { "-i": "[idinf]-[Tag]", "-j": "[X'inf]", "-k": "[Vinf]", "-f": "[Expto]==B" },
        "outputs": { "-o": "protein_expto.tsv" }
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "q2a_lowerNormV.tsv" },
        "params":  { "-i": "[idinf]", "-j": "[idinf]-[Tag]", "-f": "[Expto]==B" },
        "outputs": { "-o": "q2q_rels.tsv" }
      }]
    },{
      "name": "sanxot",
      "enabled": true,
      "threads": 3,
      "description": "Execute SanXoT methods within 'flexible' directory",
      "indir": "--WF__WKSDIR--",
      "outdir": "--WF__WKS__RSTDIR--",
      "inputs":  ["ID-q.tsv"],
      "outputs": ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "params":  { "-i": "1", "-j": "[Protein]", "-l": "hsa", "-f": "[Species]~~Homo sapiens" },
        "outputs": { "-o": "q2org_rels_human.tsv" }
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "params":  { "-i": "1", "-j": "[Protein]", "-l": "scere_ecoli", "-f": "[Species]!~Homo sapiens && [Species]!~#N/A" },
        "outputs": { "-o": "q2org_rels_rest.tsv" }    
      }]
    },{
      "name": "sanxot",
      "enabled": true,
      "threads": 3,
      "description": "Execute SanXoT methods within 'flexible' directory",
      "indir": "--WF__WKS__RSTDIR--",
      "outdir": "--WF__WKS__RSTDIR--",
      "inputs":  ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "outputs": ["q2org_rels.tsv"],
      "methods": [{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infile": ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"] },
        "outputs": { "--outfile": "q2org_rels.tsv" }
      }]
    },{
      "name": "sanxot",
      "enabled": true,
      "threads": 3,
      "description": "Execute SanXoT methods within 'flexible' directory",
      "indir": "--WF__WKS__RSTDIR--",
      "outdir": "--WF__WKS__RSTDIR--",
      "inputs":  ["protein_expto.tsv", "q2q_rels.tsv", "q2org_rels.tsv"],
      "outputs": ["proteins.tsv", "q2e_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "protein_expto.tsv", "-r": "q2q_rels.tsv" },
        "params":  { "-a": "q2q", "-g": "", "-b": "", "-s": "", "-f": "", "-v": "0" }
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "protein_expto.tsv", "-r": "q2q_rels.tsv" },
        "params":  { "-f": "0.01", "-V": "q2q_infoFile.txt" }
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "protein_expto.tsv" },
        "params":  { "-a": "q2q", "-g": "", "-f": "", "-r": "protein_expto_tagged.tsv", "-V": "q2q_infoFile.txt", "--tags": "!out" },
        "outputs": { "-o": "proteins.tsv" }
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv" },
        "params":  { "-a": "q2e", "-g": "", "-s": "", "-r": "q2org_rels.tsv", "--tags": "hsa" },
        "outputs": { "-z": "q2e_outStats.tsv" }  
      }]
    }]
  }
}
