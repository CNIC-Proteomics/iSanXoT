{
  "indata": "",
  "indir": "",
  "infilenames": [],
  "dbfile": "",
  "catfile": "",
  "outdir": "",
  "tmpdir": "",
  "rstdir": "",
  "logdir": "",
  "workflow": {
    "verbose": true,
    "rules": [{
      "name": "converter",
      "description": "Convert the result from MaxQuant (txt/evidences) to ID-q file: label-free",
      "executor": "infiles_to_outdir",
      "enabled": true,
      "threads": 3,
      "indir": "--WF__INDIR--",
      "inputs":  ["--WF__INFILE__NAMES--"],
      "outputs": ["ID.tsv"],
      "methods": [{
        "script": "converter/convert2id.py",
        "inputs":  { "--infile": "--WF__INFILE__NAMES--" },
        "outputs": { "--outfile": "ID.tsv" },
        "params":  "--dbfile \"--WF__INFILE__DB--\""
      }]
    },{
      "name": "ratios",
      "description": "Calculation of ratios (Xs, Vs,...)",
      "executor": "on_outdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["ID.tsv"],
      "outputs": ["ID-q.tsv"],
      "methods": [{
        "script": "preSanXoT/ratios.py",
        "inputs":  { "--infile": "ID.tsv" },
        "outputs": { "--outfile": "ID-q.tsv" },
        "params":  "--datfile \"--WF__INDATA--\""
      }]
    },{
      "name": "aljamia",
      "description": "Extract information from ID-q file",
      "executor": "outdir_to_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["ID-q.tsv"],
      "outputs": ["u_peptides.tsv", "p2q_rels_human.tsv", "p2q_rels_rest.tsv", "q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "u_peptides.tsv" },
        "params":  "-i [SequenceMod] -j [Xs_--TAG--_vs_--CONTROLTAG--] -k [Vs_--TAG--_vs_--CONTROLTAG--] -e 1"
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "p2q_rels_human.tsv" },
        "params":  "-i [Protein] -j [SequenceMod] -l hsa -f \"[Species]~~Homo sapiens\""
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "p2q_rels_rest.tsv" },
        "params":  "-i [Protein] -j [SequenceMod] -l scere_ecoli -f \"[Species]!~Homo sapiens && [Species]!~#N/A && [Species]!=''\" "
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "q2org_rels_human.tsv" },
        "params":  "-i 1 -j [Protein] -l hsa -f \"[Species]~~Homo sapiens\""
        },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "q2org_rels_rest.tsv" },
        "params":  "-i 1 -j [Protein] -l scere_ecoli -f \"[Species]!~Homo sapiens && [Species]!~#N/A && [Species]!=''\" "
      }]
    },{
      "name": "aljamia_cat",
      "description": "Concatenate files from aljamia",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 1,
      "inputs":  ["p2q_rels_human.tsv", "p2q_rels_rest.tsv", "q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "outputs": ["p2q_rels.tsv", "q2org_rels.tsv"],
      "methods": [{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infiles": ["p2q_rels_human.tsv", "p2q_rels_rest.tsv"] },
        "outputs": { "--outfile": "p2q_rels.tsv" }
      },{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infile": ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"] },
        "outputs": { "--outfile": "q2org_rels.tsv" }
      }]
    },{
      "name": "klibrate",
      "description": "SanXoT node: peptide to protein",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["u_peptides.tsv", "p2q_rels.tsv"],
      "outputs": ["peptides.tsv"],
      "methods": [{
        "script": "SanXoT/klibrate.py",
        "inputs":  { "-d": "u_peptides.tsv" },
        "outputs": { "-r": "p2q_rels.tsv", "-o": "peptides.tsv" },
        "params":  "-a p2q -g "
      }]  
    },{
      "name": "peptide2protein",
      "description": "SanXoT node: peptide to protein",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["peptides.tsv", "p2q_rels.tsv"],
      "outputs": ["proteins.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  "-a p2q -g -b -s"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  "--PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "peptides_tagged.tsv" },
        "outputs": { "-o": "proteins.tsv" },
        "params":  "-a p2q -g -f --PARAMS__VARIANCE--"
      }]
    },{
      "name": "everything2all",
      "executor": "on_tmpdir",
      "description": "SanXoT node: peptide/protein/category to all",
      "enabled": true,
      "threads": 3,
      "inputs":  ["proteins.tsv", "q2org_rels.tsv"],
      "outputs": ["q2a_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv", "-r": "q2org_rels.tsv" },
        "outputs": { "-z": "q2a_outStats.tsv" },
        "params":  "-a q2a -g -s --tags hsa"
      }]  
    },{
      "name": "collector",
      "description": "Merge the results of SanXoT nodes",
      "executor": "tmpdir_to_rstdir",
      "enabled": true,
      "threads": 1,
      "inputs":  ["q2a_outStats.tsv"],
      "outputs": ["q2a_lowerNormV.tsv"],
      "methods": [{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "q2a_lowerNormV.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex q2a_lowerNormV.tsv"
      }]
    },{
      "name": "aljamia",
      "executor": "on_rstdir",
      "description": "Extract information from ID-q file",
      "enabled": true,
      "threads": 3,
      "inputs":  ["q2a_lowerNormV.tsv"],
      "outputs": ["protein_expto.tsv", "q2q_rels.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "q2a_lowerNormV.tsv" },
        "outputs": { "-o": "protein_expto.tsv" },
        "params":  "-i [idinf]-[Tag] -j [X'inf] -k [Vinf] -f \"[Expto]==B\""
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "q2a_lowerNormV.tsv" },
        "outputs": { "-o": "q2q_rels.tsv" },
        "params":  "-i [idinf] -j [idinf]-[Tag] -f \"[Expto]==B\""
      }]
    },{
      "name": "aljamia",
      "executor": "outdir_to_rstdir",
      "description": "Execute SanXoT methods within 'flexible' directory",
      "enabled": true,
      "threads": 3,
      "inputs":  ["ID-q.tsv"],
      "outputs": ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "q2org_rels_human.tsv" },
        "params":  "-i 1 -j [Protein] -l hsa -f \"[Species]~~Homo sapiens\""
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "q2org_rels_rest.tsv" },
        "params":  "-i 1 -j [Protein] -l scere_ecoli -f \"[Species]!~Homo sapiens && [Species]!~#N/A && [Species]!=''\""
      }]
    },{
      "name": "aljamia_cat",
      "description": "Concatenate files from aljamia",
      "executor": "on_rstdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"],
      "outputs": ["q2org_rels.tsv"],
      "methods": [{
        "script": "SanXoT/concatenate.py",
        "inputs":  { "--infile": ["q2org_rels_human.tsv", "q2org_rels_rest.tsv"] },
        "outputs": { "--outfile": "q2org_rels.tsv" }
      }]
    },{
      "name": "proteinExpto2all",
      "description": "Execute SanXoT methods within 'flexible' directory",
      "executor": "on_rstdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["protein_expto.tsv", "q2q_rels.tsv", "q2org_rels.tsv"],
      "outputs": ["proteins.tsv", "q2e_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "protein_expto.tsv", "-r": "q2q_rels.tsv" },
        "params":  "-a q2q -g -b -s -f -v 0"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "protein_expto.tsv", "-r": "q2q_rels.tsv" },
        "params":  "-f 0.01 -V q2q_infoFile.txt"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "protein_expto.tsv" },
        "outputs": { "-o": "proteins.tsv" },
        "params":  "-a q2q -g -f -r protein_expto_tagged.tsv -V q2q_infoFile.txt"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv" },
        "outputs": { "-z": "q2e_outStats.tsv" },
        "params":  "-a q2e -g -s -r q2org_rels.tsv --tags hsa"
      }]
  
      
   }]
  }
}