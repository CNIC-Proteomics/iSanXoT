{
  "indata": "",
  "indir": "",
  "infilenames": [],
  "dbfile": "",
  "catfile": "",
  "outdir": "",
  "tmpdir": "",
  "rstdir": "",
  "logdir": "",
  "workflow": {
    "verbose": true,
    "rules": [{
      "name": "fdr",
      "description": "Calculation of FDR",
      "executor": "indir_to_outdir",
      "enabled": true,
      "threads": 3,
      "inputs":  [],
      "outputs": ["ID.tsv"],
      "methods": [{
        "script": "preSanXoT/fdr.py",
        "inputs":  { "--indir": "--WF__INDIR--" },
        "outputs": { "--outfile": "ID.tsv" },
        "params":  ""
      }]
    },{
      "name": "pre_sanxot",
      "description": "Calculation of ratios (Xs, Vs,...)",
      "executor": "on_outdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["ID.tsv"],
      "outputs": ["ID-q.tsv"],
      "methods": [{
        "script": "preSanXoT/pre_sanxot.py",
        "inputs":  { "--infile": "ID.tsv" },
        "outputs": { "--outfile": "ID-q.tsv" },
        "params":  "--datfile \"--WF__INDATA--\""
      }]
    },{
      "name": "aljamia",
      "description": "Extract information from ID-q file",
      "executor": "outdir_to_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["ID-q.tsv"],
      "outputs": ["u_scans.tsv", "s2p_rels.tsv", "p2q_rels.tsv"],
      "methods": [{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "u_scans.tsv" },
        "params":  "-i [Spectrum_File]-[Scan]-[Charge] -j [Xs_--TAG--_vs_--CONTROLTAG--] -k [Vs_--TAG--_vs_--CONTROLTAG--]"
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "s2p_rels.tsv" },
        "params":  "-i [SequenceMod] -j [Spectrum_File]-[Scan]-[Charge]"
      },{
        "script": "SanXoT/aljamia.py",
        "inputs":  { "-x": "ID-q.tsv" },
        "outputs": { "-o": "p2q_rels.tsv" },
        "params":  "-i [Protein] -j [SequenceMod]"
      }]
    },{
      "name": "klibrate",
      "description": "SanXoT node: calibrate",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["u_scans.tsv", "s2p_rels.tsv"],
      "outputs": ["scans.tsv"],
      "methods": [{
        "script": "SanXoT/klibrate.py",
        "inputs":  { "-d": "u_scans.tsv" },
        "outputs": { "-r": "s2p_rels.tsv", "-o": "scans.tsv" },
        "params":  "-a s2p -g " 
      }]  
    },{
      "name": "scan2peptide",
      "description": "SanXoT node: scan to peptide",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["scans.tsv", "s2p_rels.tsv"],
      "outputs": ["peptides.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "scans.tsv", "-r": "s2p_rels.tsv" },
        "params":  "-a s2p -g -b -s"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "scans.tsv", "-r": "s2p_rels.tsv" },
        "params":  "--PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "scans.tsv", "-r": "scans_tagged.tsv" },
        "outputs": { "-o": "peptides.tsv" },
        "params":  "-a s2p -g -f --PARAMS__VARIANCE--"
      }]  
    },{
      "name": "peptide2protein",
      "description": "SanXoT node: peptide to protein",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["peptides.tsv", "p2q_rels.tsv"],
      "outputs": ["proteins.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  "-a p2q -g -b -s"
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "p2q_rels.tsv" },
        "params":  "--PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv", "-r": "peptides_tagged.tsv" },
        "outputs": { "-o": "proteins.tsv" },
        "params":  "-a p2q -g -f --PARAMS__VARIANCE--"
      }]
    },{
      "name": "protein2category",
      "description": "SanXoT node: protein to category",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["proteins.tsv"],
      "outputs": ["categories.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv" },
        "params":  "-a q2c -g -b -s -r \"--WF__INFILE__CAT--\""
      },{
        "script": "SanXoT/sanxotsieve.py",
        "inputs":  { "-d": "proteins.tsv" },
        "params":  "-r \"--WF__INFILE__CAT--\" --PARAMS__FDR-- --PARAMS__VARIANCE--"
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv", "-r": "proteins_tagged.tsv" },
        "outputs": { "-o": "categories.tsv" },
        "params":  "-a q2c -g -f --PARAMS__VARIANCE--"
      }]
    },{
      "name": "everything2all",
      "description": "SanXoT node: peptide/protein/category to all",
      "executor": "on_tmpdir",
      "enabled": true,
      "threads": 3,
      "inputs":  ["peptides.tsv", "proteins.tsv", "categories.tsv"],
      "outputs": ["p2a_outStats.tsv", "q2a_outStats.tsv", "c2a_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "peptides.tsv" },
        "outputs": { "-z": "p2a_outStats.tsv" },
        "params":  "-a p2a -C -g "
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "proteins.tsv" },
        "outputs": { "-z": "q2a_outStats.tsv" },
        "params":  "-a q2a -C -g -f "
      },{
        "script": "SanXoT/sanxot.py",
        "inputs":  { "-d": "categories.tsv" },
        "outputs": { "-z": "c2a_outStats.tsv" },
        "params":  "-a c2a -C -g -f -v 0"
      }]  
    },{
      "name": "collector",
      "description": "Merge the results of SanXoT nodes",
      "executor": "tmpdir_to_rstdir",
      "enabled": true,
      "threads": 1,
      "inputs":  ["p2a_outStats.tsv", "q2a_outStats.tsv", "c2a_outStats.tsv"],
      "outputs": ["p2a_outStats.tsv", "q2a_outStats.tsv", "c2a_outStats.tsv"],
      "methods": [{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "p2a_outStats.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex p2a_outStats.tsv"
      },{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "q2a_outStats.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex q2a_outStats.tsv"
      },{
        "script": "SanXoT/collector.py",
        "outputs": { "--outfile": "c2a_outStats.tsv" },
        "params":  "--indir \"--WF__WKS__TMPDIR--\"  --regex c2a_outStats.tsv"
      }]
    }]
  }
}
